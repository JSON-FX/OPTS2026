# Story 1.1: Project Setup & Configuration

## Status

Draft

## Story

**As a** Developer,
**I want** to initialize the Laravel 12.x project with React 19, TypeScript, Inertia.js, and MySQL database,
**so that** the development environment is ready for feature implementation.

## Acceptance Criteria

1. Laravel 12.x project created with `composer create-project laravel/laravel opts2026`
2. Laravel Breeze installed with React starter kit (`php artisan breeze:install react`)
3. Git repository initialized with appropriate `.gitignore` for Laravel projects
4. Database configured in `.env` file connecting to MySQL 8.0+ database named `opts2026_dev`
5. Database migrations run successfully (`php artisan migrate`)
6. NPM dependencies installed and Vite build runs successfully (`npm install && npm run dev`)
7. Application loads at `http://localhost` with Laravel Breeze default welcome/login page
8. TypeScript compilation succeeds with no errors
9. Tailwind CSS and Shadcn/UI components render correctly
10. README.md updated with project setup instructions including database setup, dependency installation, and local development server commands
11. Environment includes PHP 8.2+, Composer, Node.js/NPM, MySQL 8.0+

## Tasks / Subtasks

- [ ] **Task 1: Environment Verification & Prerequisites** (AC: 11)
  - [ ] Verify PHP 8.2+ installed: `php --version`
  - [ ] Verify Composer 2.x installed: `composer --version`
  - [ ] Verify Node.js/NPM 10.x installed: `node --version && npm --version`
  - [ ] Verify MySQL 8.0+ running and accessible
  - [ ] Create MySQL database `opts2026_dev`

- [ ] **Task 2: Initialize Laravel 12.x Project** (AC: 1)
  - [ ] Run `composer create-project laravel/laravel opts2026`
  - [ ] Verify Laravel installation: `php artisan --version` should show Laravel 12.x
  - [ ] Navigate to project directory

- [ ] **Task 3: Install Laravel Breeze with React** (AC: 2)
  - [ ] Run `php artisan breeze:install react`
  - [ ] Select TypeScript when prompted (default in Laravel 12.x)
  - [ ] Verify Breeze installation: check for `resources/js/Pages/Auth/` directory

- [ ] **Task 4: Initialize Git Repository** (AC: 3)
  - [ ] Run `git init`
  - [ ] Verify `.gitignore` includes Laravel defaults (node_modules, vendor, .env, storage/, bootstrap/cache)
  - [ ] Create initial commit: `git add . && git commit -m "Initial commit: Laravel 12.x + Breeze React + TypeScript"`

- [ ] **Task 5: Configure Database Connection** (AC: 4)
  - [ ] Update `.env` file with database credentials:
    - `DB_CONNECTION=mysql`
    - `DB_HOST=127.0.0.1`
    - `DB_PORT=3306`
    - `DB_DATABASE=opts2026_dev`
    - `DB_USERNAME=<username>`
    - `DB_PASSWORD=<password>`
  - [ ] Test database connection: `php artisan db:show`

- [ ] **Task 6: Run Database Migrations** (AC: 5)
  - [ ] Execute `php artisan migrate`
  - [ ] Verify migrations completed successfully (users, password_reset_tokens, sessions tables created)
  - [ ] Check database: `mysql -u <user> -p opts2026_dev -e "SHOW TABLES;"`

- [ ] **Task 7: Install Frontend Dependencies & Build** (AC: 6, 8)
  - [ ] Run `npm install`
  - [ ] Verify TypeScript compilation: `npx tsc --noEmit`
  - [ ] Run Vite dev server: `npm run dev` (verify no compilation errors)
  - [ ] Run Vite build: `npm run build` (verify successful production build)

- [ ] **Task 8: Verify Application Loads** (AC: 7, 9)
  - [ ] Start Laravel dev server: `php artisan serve`
  - [ ] Open browser at `http://localhost:8000`
  - [ ] Verify Breeze welcome page displays with Login/Register links
  - [ ] Verify Tailwind CSS styles render correctly (check typography, spacing, colors)
  - [ ] Verify Shadcn/UI components render correctly (check buttons, inputs on auth pages)
  - [ ] Test registration flow to ensure React components functional

- [ ] **Task 9: Update README.md** (AC: 10)
  - [ ] Document project overview (OPTS - Office of the Procuring Tracking System)
  - [ ] Add prerequisites section (PHP 8.2+, Composer, Node.js/NPM, MySQL 8.0+)
  - [ ] Add setup instructions:
    - Clone repository
    - Database setup: `CREATE DATABASE opts2026_dev;`
    - Copy `.env.example` to `.env` and configure database credentials
    - Run `composer install`
    - Run `npm install`
    - Run `php artisan migrate`
    - Run `npm run dev` (development) or `npm run build` (production)
    - Run `php artisan serve` and access `http://localhost:8000`
  - [ ] Add tech stack summary (Laravel 12.x, React 19, TypeScript, Inertia.js, MySQL, Tailwind, Shadcn/UI)

- [ ] **Task 10: Write Feature Tests** (Testing)
  - [ ] Create test `tests/Feature/Setup/ProjectSetupTest.php`
  - [ ] Test Laravel installation: assert `php artisan --version` contains "Laravel Framework 12"
  - [ ] Test database connection: assert database `opts2026_dev` accessible
  - [ ] Test migrations: assert `users`, `password_reset_tokens`, `sessions` tables exist
  - [ ] Test Breeze pages load: GET `/` returns 200, GET `/login` returns 200
  - [ ] Run tests: `php artisan test`

## Dev Notes

### Previous Story Insights

No previous story exists. This is the first story (1.1) establishing the project foundation.

### Tech Stack Configuration
[Source: architecture/tech-stack.md]

**Backend:**
- **Laravel Framework:** Version 12.x - Latest stable version with React starter kit, Inertia.js support
- **PHP:** 8.2+ required for Laravel 12.x (provides enums, readonly properties, union types)
- **Database:** MySQL 8.0+ for window functions, JSON support, 7-year retention capability
- **ORM:** Eloquent (built-in with Laravel)

**Frontend:**
- **React:** Version 19 - Included in Laravel 12.x Breeze React starter
- **TypeScript:** 5.x - Default in Breeze React starter for type safety
- **Inertia.js:** 1.x - SSR bridge between Laravel and React
- **UI Components:** Shadcn/UI - Included by default in Laravel 12.x Breeze React starter, built on Radix UI (WCAG 2.1 AA accessible)
- **CSS Framework:** Tailwind CSS 3.x - Utility-first, included in Breeze starter
- **Icon Library:** Lucide React - Shadcn/UI integrated icons
- **Build Tool:** Vite 5.x - Laravel 12.x default bundler (replaces Mix)

**Development Tools:**
- **Package Managers:** Composer 2.x (PHP), NPM 10.x (Node)
- **Authentication:** Laravel Breeze - Session-based auth scaffolding in starter kit
- **Code Style:** Laravel Pint (PHP formatter), ESLint + Prettier (JS/TS)
- **Dev Environment:** Laravel Sail (Docker) or Herd (native)

### Project Structure
[Source: architecture/unified-project-structure.md]

The project follows Laravel's standard structure with these key directories:

```
opts2026/
├── app/                      # Application logic
│   ├── Http/Controllers/     # Controllers
│   ├── Models/              # Eloquent models
│   ├── Policies/            # Authorization policies
│   └── Services/            # Business logic services
├── database/
│   ├── migrations/          # Database schema
│   └── seeders/            # Seed data
├── resources/
│   ├── js/
│   │   ├── Components/      # React components
│   │   │   └── ui/         # Shadcn wrappers
│   │   ├── Layouts/        # Layouts (AuthenticatedLayout, GuestLayout)
│   │   ├── Pages/          # Inertia pages by domain
│   │   ├── Types/          # TypeScript interfaces
│   │   └── app.tsx         # Inertia bootstrapping
│   └── css/                # Tailwind entry
├── routes/
│   └── web.php             # Inertia routes
├── tests/
│   ├── Feature/            # Feature tests
│   └── Unit/               # Unit tests
├── docs/
│   ├── architecture/       # Architecture docs
│   └── stories/           # Story files
├── package.json            # NPM dependencies
├── composer.json           # PHP dependencies
├── vite.config.ts          # Vite configuration
└── tailwind.config.js      # Tailwind configuration
```

### Coding Standards
[Source: architecture/coding-standards.md]

**PHP/Laravel:**
- PHP 8.2+ strict typing: declare `strict_types=1`
- PSR-12 formatting: run `./vendor/bin/pint` before commits
- Thin controllers: validate via Form Requests, delegate to Services
- Eloquent models: use `$fillable`, explicit casting
- Database transactions for multi-step mutations

**Naming Conventions:**
- Controllers: `ResourceNameController`
- Form requests: `StoreResourceRequest`, `UpdateResourceRequest`
- Services: `ResourceActionService` or domain-specific
- StudlyCase for classes, camelCase for methods, snake_case for DB columns

**JavaScript/TypeScript:**
- TypeScript 5.x strict mode, no `any` types
- Functional React components with hooks
- Run `npm run lint` and `npm run format` before commits
- Pages: `resources/js/Pages/{Domain}/{PageName}.tsx`
- Types: `resources/js/types/models.ts`

**Git:**
- Atomic commits scoped to single feature
- Document env vars in `.env.example`

### Testing

[Source: architecture/testing-strategy.md]

**Testing Approach:**
- **Unit Tests:** `tests/Unit` - Pure functions, services with mocks (PHPUnit)
- **Feature Tests:** `tests/Feature` - HTTP endpoints, Inertia responses, RBAC enforcement
  - Use `RefreshDatabase` trait for database transactions
  - Seed data with factories/seeders
  - Assert view props with `assertInertia`
  - Assert database state with `assertDatabaseHas`
- **Frontend Tests:** Vitest + React Testing Library (run with `npm run test`)
- **E2E Tests:** Playwright (planned for critical workflows)

**Test Execution:**
- Backend: `php artisan test`
- Frontend: `npm run lint && npm run test`
- Code formatting: `./vendor/bin/pint` (PHP), `npm run format` (JS/TS)

**Story 1.1 Testing Requirements:**
- Create feature test `tests/Feature/Setup/ProjectSetupTest.php`
- Validate Laravel version, database connectivity, migration success
- Verify Breeze pages load correctly (/, /login return 200)
- Ensure test suite runs cleanly: `php artisan test` exits with 0

### Technical Constraints

[Source: architecture/tech-stack.md#technology-rationale-summary]

- **Monolithic Architecture:** System designed for 200 concurrent users, 100k transactions - single-server capacity
- **MySQL Required:** Per PRD Technical Assumptions, use MySQL 8.0+ (not PostgreSQL)
- **Session-Based Auth:** Laravel Breeze provides session-based authentication (not token-based)
- **Accessibility:** Shadcn/UI components ensure WCAG 2.1 AA compliance out of the box

### Additional Guidance

**Installation Notes:**
- Laravel 12.x Breeze React starter includes TypeScript by default
- Vite replaces Laravel Mix as the build tool (faster HMR, optimized builds)
- Inertia.js eliminates need for separate REST API layer - pages receive props directly from controllers

**Common Issues:**
- Ensure MySQL service running before migrations: `mysql -u root -p -e "SELECT 1;"`
- If Vite fails to build, clear cache: `npm run clean && npm install`
- TypeScript errors: ensure `tsconfig.json` present and `npm install` completed

**Environment Variables:**
- Copy `.env.example` to `.env` before configuration
- Update `.env.example` with any new variables for team reference

### Project Structure Notes

Project structure aligns with architecture expectations. No conflicts identified. After setup:
- Breeze will scaffold `resources/js/Pages/Auth/` for login/register pages
- Default layouts in `resources/js/Layouts/` (AuthenticatedLayout, GuestLayout)
- Shadcn/UI components accessible in `resources/js/Components/ui/`

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-31 | 1.0 | Initial story draft created by Scrum Master | Bob (sm agent) |

## Dev Agent Record

_This section will be populated by the development agent during implementation._

### Agent Model Used

_To be filled by Dev Agent_

### Debug Log References

_To be filled by Dev Agent_

### Completion Notes List

_To be filled by Dev Agent_

### File List

_To be filled by Dev Agent_

## QA Results

_This section will be populated by the QA agent after story completion._
